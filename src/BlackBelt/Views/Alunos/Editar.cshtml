@using System.Text.Json
@{
    ViewData["Title"] = "Editar Aluno";
}
@model BlackBelt.Models.Aluno
<h3>Editar Aluno</h3>
<form asp-action="EditarAluno" asp-controller="Alunos" method="post">
    <input type="hidden" asp-for="Id" />
    <input type="hidden" asp-for="Dt_Matricula" />
    <div class="form-floating mb-3">
        <input type="text" class="form-control" asp-for="Nome" value="@Model.Nome.ToString()">
        <label for="Nome">Nome</label>
        <span asp-validation-for="Nome" class="text-danger"></span>
    </div>
    <div class="form-floating mb-3">
        <input type="text" class="form-control" asp-for="Cpf" value="@Model.Cpf.ToString()">
        <label for="Cpf">CPF</label>
        <span asp-validation-for="Cpf" class="text-danger"></span>
    </div>
    <div class="form-floating mb-3">
        <input type="email" class="form-control" asp-for="Email" value="@Model.Email.ToString()">
        <label for="Email">Email</label>
        <span asp-validation-for="Email" class="text-danger"></span>
    </div>
    <div class="form-floating mb-3">
        <input type="text" class="form-control" asp-for="Telefone" value="@Model.Telefone.ToString()">
        <label for="Telefone">Telefone</label>
        <span asp-validation-for="Telefone" class="text-danger"></span>
    </div>
    <div class="form-floating mb-3">
        <input type="date" class="form-control" asp-for="Dt_Nascimento" value="@Model.Dt_Nascimento.ToString("yyyy-MM-dd")">
        <label for="Dt_Nascimento">Data de nascimento</label>
        <span asp-validation-for="Dt_Nascimento" class="text-danger"></span>
    </div>
    <div class="form-floating mb-3">
        <input type="text" class="form-control" asp-for="Faixa" value="@Model.Faixa.ToString()">
        <label for="Faixa">Faixa</label>
        <span asp-validation-for="Faixa" class="text-danger"></span>
    </div>
    <div class="form-floating mb-3">
        <select class="form-select" asp-for="Id_Turma">
            <option value="@Model.Id_Turma" selected>Selecione a turma</option>
            @if (ViewData["Turmas"] != null)
            {
                var turmas = ViewData["Turmas"] as IEnumerable<Turma>;
                foreach (var turma in turmas)
                {
                    <option value="@turma.Id">@turma.Nome.ToString()</option>
                }
            }
        </select>
        <label for="floatingSelect">Turma</label>
        <span asp-validation-for="Id_Turma" class="text-danger"></span>
    </div>
    <button type="submit" class="btn btn-primary mb-3">Salvar</button>

</form>

<a class="nav-link text-light btn btn-dark" asp-area="" asp-controller="Alunos" asp-action="Index">Voltar</a>

@if (TempData["ErroCadastroAluno"] != null)
{
    <script>
        alert(@Html.Raw(JsonSerializer.Serialize(TempData["ErroCadastroAluno"])));
    </script>
}

@if (TempData["ErroCpfAluno"] != null)
{
    <script>
        alert(@Html.Raw(JsonSerializer.Serialize(TempData["ErroCpfAluno"])));
    </script>
}